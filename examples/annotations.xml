<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.01">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata-vocabularies/v4.0/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core">
      <Annotation Term="Core.DefaultNamespace" />
    </edmx:Include>
  </edmx:Reference>
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Capabilities.V1.xml">
    <edmx:Include Namespace="Org.OData.Capabilities.V1" Alias="Capabilities" />
  </edmx:Reference>
  <edmx:Reference Uri="https://wiki.scn.sap.com/wiki/download/attachments/448470974/Common.xml?api=v2">
    <edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="Common" />
  </edmx:Reference>
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
    <edmx:Include Namespace="Org.OData.Validation.V1" Alias="Validation" />
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="Supported.Annotations" Alias="self">
      <EntityType Name="SinglePartKey">
        <Key>
          <PropertyRef Name="ID" />
        </Key>
        <Property Name="ID" Type="Edm.String" Nullable="false" />
        <Property Name="Pattern" Type="Edm.String">
          <Annotation Term="Validation.Pattern" String="^.+$" />
        </Property>
        <Property Name="PatternExt" Type="Edm.String" />
        <Property Name="AllowedValues" Type="Edm.String">
          <Annotation Term="Validation.AllowedValues">
            <Collection>
              <Record>
                <PropertyValue Property="Value" String="red" />
              </Record>
              <Record>
                <PropertyValue Property="Value" String="green" />
              </Record>
              <Record>
                <PropertyValue Property="Value" String="blue" />
              </Record>
            </Collection>
          </Annotation>
        </Property>
        <Property Name="AllowedValuesExt" Type="Edm.String" />
        <NavigationProperty Name="AllOne" Type="self.TwoPartKey" />
        <NavigationProperty Name="AllMany" Type="Collection(self.TwoPartKey)" />
        <NavigationProperty Name="NothingOne" Type="self.TwoPartKey" />
        <NavigationProperty Name="NothingMany" Type="Collection(self.TwoPartKey)" />
      </EntityType>

      <EntityType Name="TwoPartKey">
        <Key>
          <PropertyRef Name="One" />
          <PropertyRef Name="Two" />
        </Key>
        <Property Name="One" Type="Edm.Int32" Nullable="false" />
        <Property Name="Two" Type="Edm.Int32" Nullable="false" />
      </EntityType>

      <EntityContainer Name="DemoService">
        <EntitySet Name="AllSet" EntityType="self.SinglePartKey">
          <NavigationPropertyBinding Path="One" Target="TwoAllSet" />
          <NavigationPropertyBinding Path="Two" Target="TwoAllSet" />
        </EntitySet>
        <EntitySet Name="NothingSet" EntityType="self.SinglePartKey">
          <NavigationPropertyBinding Path="One" Target="TwoAllSet" />
          <NavigationPropertyBinding Path="Two" Target="TwoAllSet" />
          <Annotation Term="Capabilities.InsertRestrictions">
            <Record>
              <PropertyValue Bool="false" Property="Insertable" />
            </Record>
          </Annotation>
        </EntitySet>
        <Singleton Name="AllSingleton" Type="self.SinglePartKey">
          <Annotation Term="Core.Description" String="First Singleton" />
          <NavigationPropertyBinding Path="One" Target="TwoAllSet" />
          <NavigationPropertyBinding Path="Two" Target="TwoAllSet" />
        </Singleton>
        <Singleton Name="NothingSingleton" Type="self.SinglePartKey">
          <NavigationPropertyBinding Path="One" Target="TwoAllSet" />
          <NavigationPropertyBinding Path="Two" Target="TwoAllSet" />
        </Singleton>
        <EntitySet Name="TwoAllSet" EntityType="self.TwoPartKey">
        </EntitySet>
        <EntitySet Name="TwoNothingSet" EntityType="self.TwoPartKey">
          <Annotation Term="Capabilities.InsertRestrictions">
            <Record>
              <PropertyValue Bool="false" Property="Insertable" />
            </Record>
          </Annotation>
        </EntitySet>
      </EntityContainer>

      <Annotations Target="self.SinglePartKey/PatternExt">
        <Annotation Term="Validation.Pattern" String="^.+$" />
      </Annotations>
      <Annotations Target="self.SinglePartKey/AllowedValuesExt">
        <!-- TODO: this is not yet supported -->
        <Annotation Term="Validation.AllowedValues">
          <Collection>
            <Record>
              <PropertyValue Property="Value" String="red" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="green" />
            </Record>
            <Record>
              <PropertyValue Property="Value" String="blue" />
            </Record>
          </Collection>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>